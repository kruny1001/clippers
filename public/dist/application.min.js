"use strict";function stateService($state){return{toGo:function(name){$state.go(name)}}}function DialogController($scope,$mdDialog){$scope.hide=function(){$mdDialog.hide()},$scope.cancel=function(){$mdDialog.cancel()},$scope.answer=function(answer){$mdDialog.hide(answer)}}function EtcProductsController($rootScope,$scope,$stateParams,$location,$mdDialog,Authentication,EtcProducts,$timeout,$q,$state,ProductBrands,Cartlist){$scope.loadUsers=function(){return $scope.brands=[],$timeout(function(){$scope.brands=ProductBrands.query()},650)},$scope.addCart=function(){$rootScope.$broadcast("cart-updated",{product:$scope.etcProduct})},$scope.authentication=Authentication,$scope.showDetail=function(ev){$mdDialog.show({controller:DialogController,templateUrl:"modules/etc-products/template/dialogs/showDetail.html",targetEvent:ev,clickOutsideToClose:!0}).then(function(answer){$scope.alert='You said the information was "'+answer+'".'},function(){$scope.alert="You cancelled the dialog."})},$scope.create=function(){var etcProduct=new EtcProducts({name:this.name,price:this.price,image:this.image,brand:this.brand._id});etcProduct.$save(function(response){$location.path("etc-products/"+response._id),$scope.name=""},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.remove=function(etcProduct){if(etcProduct){etcProduct.$remove();for(var i in $scope.etcProducts)$scope.etcProducts[i]===etcProduct&&$scope.etcProducts.splice(i,1)}else $scope.etcProduct.$remove(function(){$location.path("etc-products")})},$scope.update=function(){var etcProduct=$scope.etcProduct;etcProduct.brand=$scope.etcProduct.brand._id,etcProduct.$update(function(){$location.path("etc-products/"+etcProduct._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.find=function(){$scope.etcProducts=EtcProducts.query()},$scope.findOne=function(){$scope.etcProduct=EtcProducts.get({etcProductId:$stateParams.etcProductId})},$scope.goToParent=function(){$state.go("wigs")},$scope.goToCart=function(){$state.go("cart")},$scope.readonly=!1,$scope.fruitNames=["Apple","Banana","Orange"],$scope.roFruitNames=angular.copy(self.fruitNames),$scope.newFruitNames=["Red","Yellow","Green"],$scope.vegObjs=[{name:"ModelModel1",type:"Red"},{name:"ModelModel2",type:"Yellow"},{name:"ModelModel3",type:"Green"}],$scope.newVeg=function(chip){return{name:chip,type:"unknown"}};var imagePath="modules/etc/img/bunny.png";$scope.phones=[{type:"Home",number:"(555) 251-1234"},{type:"Cell",number:"(555) 786-9841"}],$scope.todos=[{face:imagePath,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands  I'll be in your neighborhood doing errands  I'll be in your neighborhood doing errands  I'll be in your neighborhood doing errands I'll be in your neighborhood doing errands  I'll be in your neighborhood doing errands  I'll be in your neighborhood doing errands  I'll be in your neighborhood doing errandsI'll be in your neighborhood doing errands  I'll be in your neighborhood doing errands  I'll be in your neighborhood doing errands  I'll be in your neighborhood doing errandsI'll be in your neighborhood doing errands  I'll be in your neighborhood doing errands  I'll be in your neighborhood doing errands  I'll be in your neighborhood doing errands"},{face:imagePath,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:imagePath,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:imagePath,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:imagePath,what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"}]}function wigsCtrl($scope,$state,$timeout,EtcProducts,Preloadimage){$scope.toGo=function(content){$state.go("viewEtcProduct",{etcProductId:content._id})},$scope.cartGo=function(stateName){$state.go(stateName)},$scope.isLoading=!0,$scope.isSuccessful=!1,$scope.percentLoaded=0;var testData=[1,2,3,4];$scope.append=function(){testData.forEach(function(value){$scope.etcProducts.push({name:"232",image:"modules/etc/img/products/1.png"})}),$scope.$digest()},$scope.loadProduct=EtcProducts.list(),$scope.loadProduct.$promise.then(function(data){$scope.etcProducts=data,console.log(data),testData=data;var images=data.map(function(d){return d.image});Preloadimage.preloadImages(images).then(function(imageLoactions){console.info("Preload Successful"),$timeout(function(){$scope.isLoading=!1,$scope.isSuccessful=!0},500)},function(imageLocation){$scope.isLoading=!1,$scope.isSuccessful=!1,console.error("Image Failed",imageLocation),console.info("Preload Failure")},function(event){$scope.percentLoaded=event.percent,console.info("Percent loaded:",event.percent),angular.element()})})}function dropinCtrl($http){var vm=this;vm.title="dropin test",$http.get("/client-token").success(function(data){braintree.setup(data,"dropin",{container:"payment-form"})})}function checkout($scope,$http){$scope.creditCard={cardholderName:null,number:null,expirationMonth:null,expirationYear:null,cvv:null},$scope.dropinOptions={onPaymentMethodReceived:function(payload){console.log(payload),$http.post("/buy-something",{payment_method_nonce:payload.nonce}).success(function(response){console.log(response),$scope.result=response})}}}function BtPaymentController($scope,$http,$braintree){$scope.title="등록하기";var client;$scope.creditCard={number:"",expirationDate:""};var startup=function(){$braintree.getClientToken().success(function(token){client=new $braintree.api.Client({clientToken:token})})};$scope.creditCard.number="4111111111111111",$scope.creditCard.expirationDate="10/18",$scope.payButtonClicked=function(){console.log("clicked"),client.tokenizeCard({number:$scope.creditCard.number,expirationDate:$scope.creditCard.expirationDate},function(err,nonce){console.log("err: "+err),console.log("nonce: "+nonce),$http.post("/buy-something",{nonce:nonce}).success(function(data){console.log(data),alert("1")}).error(function(){alert("2")})})},startup()}function ShopCartController($scope,Cartlist){function loadContacts(){var contacts=["Marina Augustine","Oddr Sarno","Nick Giannopoulos","Narayana Garner","Anita Gros","Megan Smith","Tsvetko Metzger","Hector Simek","Some-guy withalongalastaname"];return contacts.map(function(c,index){var cParts=c.split(" "),contact={name:c,email:cParts[0][0].toLowerCase()+"."+cParts[1].toLowerCase()+"@example.com",image:"http://lorempixel.com/50/50/people?"+index};return contact._lowername=contact.name.toLowerCase(),contact})}var vm=this;vm.imagePath="https://material.angularjs.org/img/washedout.png",vm.itemlist=Cartlist.getItems(),vm.allContacts=loadContacts(),vm.contacts=[vm.allContacts[0]],vm.filterSelected=!0}function shopCartDirective($compile,Cartlist){return{template:'<div layout="row"><div class="cart-title md-body-2" flex="70">Shopping Cart</div><div class="cart-close" flex="30"><md-button class="md-fab md-mini" ng-click="close()"><span><i class="ion-close-round"></i></span></md-button></div></div>',restrict:"E",link:function(scope,element,attrs){element.addClass("shopCartFloat"),scope.total=0;var cartContainer=angular.element('<div class="shopCartContainer" ></div>'),cartTotal=angular.element('<hr/><div layout="row" class="md-caption"><div flex="70">Total: </div><div flex="30" class="shopCartTotal" >{{total | currency:"USD$"}}</div></div>'),content=angular.element('<div layout="row" class="md-caption" ng-repeat="item in items track by $index"><img width="45" height="45" ng-src="{{item.image}}"><div class="item-name" flex="60">{{item.name}}</div><div flex="20" class="item-price">{{item.price | currency:"$"}}</div></div>'),noContent=angular.element('<div ng-if="items" layout="column" class="md-body-1" layout-align="center center"><div flex>No Items</div></div>');element.append(cartContainer),cartContainer.append(noContent),cartContainer.append(content),element.append(cartTotal),$compile(noContent)(scope),$compile(cartTotal)(scope),$compile(content)(scope),scope.items=Cartlist.getItems(),scope.items.forEach(function(value){cartContainer.append('<div class="shopCartContent" >{{value.name}}</div>'),$compile(cartContainer)(scope)}),scope.$on("cart-updated",function(event,args){scope.open(),console.log(scope.items),scope.total+=parseFloat(args.product.price);var targetUpdate=_.findIndex(scope.items,function(chr){return chr._id===args.product._id});console.log(targetUpdate),0>targetUpdate?(console.log("undefined"),Cartlist.addItem(args.product)):console.log("found: "+args.product.name)}),scope.$on("open-cart",function(event,args){scope.open()}),scope.close=function(){var tlClose=new TimelineMax({paused:!0});tlClose.to(element,.4,{scale:0,alpha:0}).set(element,{display:"none"},.4),tlClose.restart()},scope.open=function(){var tlOpen=new TimelineMax({paused:!0});tlOpen.set(element,{display:"block"}).to(element,.4,{scale:1,alpha:1}),console.log("open"),tlOpen.restart()}}}}function Cartlist(){var items=[];return{addItem:function(item){items.push(item)},getItems:function(){return items}}}var ApplicationConfiguration=function(){var applicationModuleName="mean",applicationModuleVendorDependencies=["ngResource","ngCookies","ngAnimate","ngTouch","ngMessages","ngSanitize","ui.router","ui.bootstrap","ngMaterial","braintree-angular","LocalForageModule"],registerModule=function(moduleName,dependencies){angular.module(moduleName,dependencies||[]),angular.module(applicationModuleName).requires.push(moduleName)};return{applicationModuleName:applicationModuleName,applicationModuleVendorDependencies:applicationModuleVendorDependencies,registerModule:registerModule}}();angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies),angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider",function($locationProvider){$locationProvider.hashPrefix("!")}]),angular.element(document).ready(function(){"#_=_"===window.location.hash&&(window.location.hash="#!"),angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])}),ApplicationConfiguration.registerModule("articles"),ApplicationConfiguration.registerModule("core"),ApplicationConfiguration.registerModule("etc-products"),ApplicationConfiguration.registerModule("etc"),ApplicationConfiguration.registerModule("footer"),ApplicationConfiguration.registerModule("payment"),ApplicationConfiguration.registerModule("product-brands"),ApplicationConfiguration.registerModule("shop-cart"),ApplicationConfiguration.registerModule("slide-show"),ApplicationConfiguration.registerModule("users"),angular.module("articles").run(["Menus",function(Menus){Menus.addMenuItem("topbar","Articles","articles","dropdown","/articles(/create)?"),Menus.addSubMenuItem("topbar","articles","List Articles","articles"),Menus.addSubMenuItem("topbar","articles","New Article","articles/create")}]),angular.module("articles").config(["$stateProvider",function($stateProvider){$stateProvider.state("listArticles",{url:"/articles",templateUrl:"modules/articles/views/list-articles.client.view.html"}).state("createArticle",{url:"/articles/create",templateUrl:"modules/articles/views/create-article.client.view.html"}).state("viewArticle",{url:"/articles/:articleId",templateUrl:"modules/articles/views/view-article.client.view.html"}).state("editArticle",{url:"/articles/:articleId/edit",templateUrl:"modules/articles/views/edit-article.client.view.html"})}]),angular.module("articles").controller("ArticlesController",["$scope","$stateParams","$location","Authentication","Articles",function($scope,$stateParams,$location,Authentication,Articles){$scope.authentication=Authentication,$scope.create=function(){var article=new Articles({title:this.title,content:this.content});article.$save(function(response){$location.path("articles/"+response._id),$scope.title="",$scope.content=""},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.remove=function(article){if(article){article.$remove();for(var i in $scope.articles)$scope.articles[i]===article&&$scope.articles.splice(i,1)}else $scope.article.$remove(function(){$location.path("articles")})},$scope.update=function(){var article=$scope.article;article.$update(function(){$location.path("articles/"+article._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.find=function(){$scope.articles=Articles.query()},$scope.findOne=function(){$scope.article=Articles.get({articleId:$stateParams.articleId})}}]),angular.module("articles").factory("Articles",["$resource",function($resource){return $resource("articles/:articleId",{articleId:"@_id"},{update:{method:"PUT"}})}]),angular.module("core").config(["$stateProvider","$urlRouterProvider","$compileProvider",function($stateProvider,$urlRouterProvider,$compileProvider){$compileProvider.debugInfoEnabled(!0),$urlRouterProvider.otherwise("/"),$stateProvider.state("link-list",{url:"/link-list",templateUrl:"modules/core/views/link-list.client.view.html"}).state("home",{url:"/dev",templateUrl:"modules/core/views/home.client.view.html"})}]).constant("devConfig",{directive:"red"}),angular.module("ui.tinymce",[]).value("uiTinymceConfig",{plugins:"image, link, fullscreen, code, table, contextmenu, media",contextmenu:"link media image inserttable | cell row column deletetable",image_advtab:!0,image_class_list:[{title:"Responsive Size",value:"img-responsive"}],fullscreen_new_window:!0,fullscreen_settings:{theme_advanced_path_location:"top"}}).directive("uiTinymce",["uiTinymceConfig",function(uiTinymceConfig){uiTinymceConfig=uiTinymceConfig||{};var generatedIds=0;return{require:"ngModel",link:function(scope,elm,attrs,ngModel){var expression,options,tinyInstance;attrs.id||attrs.$set("id","uiTinymce"+generatedIds++),options={setup:function(ed){ed.on("init",function(args){ngModel.$render()}),ed.on("ExecCommand",function(e){ed.save(),ngModel.$setViewValue(elm.val()),scope.$$phase||scope.$apply()}),ed.on("KeyUp",function(e){console.log(ed.isDirty()),ed.save(),ngModel.$setViewValue(elm.val()),scope.$$phase||scope.$apply()})},mode:"exact",elements:attrs.id},expression=attrs.uiTinymce?scope.$eval(attrs.uiTinymce):{},angular.extend(options,uiTinymceConfig,expression),setTimeout(function(){tinymce.init(options)}),ngModel.$render=function(){tinyInstance||(tinyInstance=tinymce.get(attrs.id)),tinyInstance&&tinyInstance.setContent(ngModel.$viewValue||"")}}}}]),angular.module("core").run(["$rootScope",function($rootScope){}]).controller("CoreHeadController",["$scope","$rootScope","$window","$log","$mdSidenav","$location","$state","$timeout","Authentication","stateService",function($scope,$rootScope,$window,$log,$mdSidenav,$location,$state,$timeout,Authentication,stateService){function buildGridModel(tileTmpl){for(var it,results=[],j=0;6>j;j++){switch(it=angular.extend({},tileTmpl),it.icon=it.icon+(j+1),it.span={row:"1",col:"1"},j+1){case 1:it.ifCondition="Authentication.user",it.id="profile",it.background="red",it.title="Profile",it.span.row=it.span.col=2;break;case 2:it.ifCondition="!Authentication.user",it.id="signIn",it.title="Sign In",it.background="green",it.span.row=it.span.col=1;break;case 3:it.ifCondition="Authentication.user",it.id="signOut",it.title="Sign Out",it.background="darkBlue";break;case 4:it.ifCondition=!0,it.id="tutorial",it.title="Tutorial",it.background="blue",it.span.col=2;break;case 5:it.ifCondition="Authentication.user",it.id="urClass",it.background="yellow",it.span.col=2,it.title="Your Classes";break;case 6:it.ifCondition="Authentication.user",it.id="allClass",it.background="red",it.span.col=2,it.title="All Classes"}results.push(it)}return results}$scope.authentication=Authentication,$scope.title="Clippers",$scope.subTitle="",$scope.link="",$scope.classroom=!1,$scope.goTo=function(name){$state.go(name),$mdSidenav("left").close().then(function(){$log.debug("close LEFT is done")})},$scope.currentState=function(){},$scope.onchangeRoute=function(){},$scope.toggleLeft=function(){$mdSidenav("left").toggle().then(function(){$log.debug("toggle left is done")})},$scope.toggleRight=function(){$mdSidenav("right").toggle().then(function(){$log.debug("toggle RIGHT is done")})};$scope.change=function(){console.log("changed"),void 0!==user._id&&$location.path("/d2l-classes/"+user._id)},$scope.tiles=buildGridModel({icon:"avatar:svg-",title:"Svg-",background:""}),$rootScope.$on("$stateChangeStart",function(event,toState,toParams){console.log("closed"),"openboard"===toState.name?($scope.title="Getting Started",$scope.subTitle="Tutorial"):"mean-home"===toState.name?($scope.title="Open Board",$scope.subTitle=" "):"d2l-home"===toState.name?($scope.title="Classroom",$scope.subTitle=" "):"listD2lClasses"===toState.name?($scope.title="Class List",$scope.subTitle="Select a Class"):"profile"===toState.name&&($scope.title="Profile",$scope.subTitle="Edit Profile")}),$scope.sliderNavEvent=function(name,target){var targetEl=$("#"+target+" figure md-grid-tile-footer h3");TweenLite.from(targetEl,.8,{scale:1.7}),$mdSidenav("left").close().then(function(){$log.debug("close LEFT is done")}),console.log(name),"Your Classes"===name?$state.go("listD2lClasses"):"Profile"===name?$state.go("profile"):"Tutorial"===name?$state.go("openboard"):"All Classes"===name?$state.go("listD2lClassesAll"):"Sign In"===name?(console.log("sign in "),$location.path("/signin")):"Sign Out"===name&&($window.location.href="auth/signout")},$scope.openCart=function(){$rootScope.$broadcast("open-cart")}}]),angular.module("core").controller("HeaderController",["$scope","Authentication","Menus",function($scope,Authentication,Menus){$scope.authentication=Authentication,$scope.isCollapsed=!1,$scope.menu=Menus.getMenu("topbar"),$scope.toggleCollapsibleMenu=function(){$scope.isCollapsed=!$scope.isCollapsed},$scope.$on("$stateChangeSuccess",function(){$scope.isCollapsed=!1}),$(document).on("scroll",function(){console.log("11111"),$(document).scrollTop()>150?TweenMax.to($("header"),1,{y:-51}):TweenMax.set($("header"),{y:0})})}]),angular.module("core").controller("HomeController",["$scope","Authentication",function($scope,Authentication,YT_event){$scope.authentication=Authentication,$scope.firstJumbo="first-jumbo-content",$scope.secondJumbo="second-jumbo-content",$scope.thirdJumbo="third-jumbo-content";var texts=angular.element(document.querySelector(".core-text-anni")),tl=new TimelineMax({repeat:6,repeatDelay:1,yoyo:!0});tl.staggerTo(texts,.2,{className:"+=superShadow",top:"-=10px",ease:Power1.easeIn},"0.3","start")}]),angular.module("core").controller("LinklistController",["$scope",function($scope){$scope.modules=[{name:"Animation",links:[{linkName:"svg1",linkHref:"/#!/svg1"},{linkName:"ryuhm12",linkHref:"/#!/ryuhm12"},{linkName:"j1",linkHref:"/#!/j1"},{linkName:"three",linkHref:"/#!/three"}]},{name:"Banners",links:[{linkName:"List",linkHref:"/#!/banners"},{linkName:"Create",linkHref:"/#!/banners/create"},{linkName:"Banner",linkHref:"/#!/banners/:bannerId"},{linkName:"Edit",linkHref:"/#!/banners/:bannerId/edit"}]},{name:"Core",links:[{linkName:"Dev",linkHref:"/#!/dev"}]},{name:"SDSUMAP",links:[{linkName:"SDSU Map",linkHref:"/#!/sdsumap-main"}]},{name:"Spec-view",links:[{linkName:"Jarvis",linkHref:"/#!/jarvis"},{linkName:"Spec Home",linkHref:"/#!/spec-home"}]},{name:"Tj-main",links:[{linkName:"tj-main",linkHref:"/#!/tj-main"}]},{name:"User-interface",links:[{linkName:"MCMU",linkHref:"/#!/mcmu"},{linkName:"Front -1 ",linkHref:"/#!/front-1"},{linkName:"Experimental Interface",linkHref:"/#!/experimental-interface"},{linkName:"Product List",linkHref:"/#!/"},{linkName:"detail-product",linkHref:"/#!/detail-product/:productId"}]},{name:"Utility",links:[{linkName:"test-page-generator",linkHref:"/#!/test-page-generator"}]}]}]),angular.module("core").controller("PlanController",["$scope","$element","Authentication","Getplans",function($scope,$element,Authentication,Getplans){$scope.find=function(){$scope.plans=Getplans.query()},$scope.find()}]),angular.module("core").service("Menus",[function(){this.defaultRoles=["*"],this.menus={};var shouldRender=function(user){if(!user)return this.isPublic;if(~this.roles.indexOf("*"))return!0;for(var userRoleIndex in user.roles)for(var roleIndex in this.roles)if(this.roles[roleIndex]===user.roles[userRoleIndex])return!0;return!1};this.validateMenuExistance=function(menuId){if(menuId&&menuId.length){if(this.menus[menuId])return!0;throw new Error("Menu does not exists")}throw new Error("MenuId was not provided")},this.getMenu=function(menuId){return this.validateMenuExistance(menuId),this.menus[menuId]},this.addMenu=function(menuId,isPublic,roles){return this.menus[menuId]={isPublic:isPublic||!1,roles:roles||this.defaultRoles,items:[],shouldRender:shouldRender},this.menus[menuId]},this.removeMenu=function(menuId){this.validateMenuExistance(menuId),delete this.menus[menuId]},this.addMenuItem=function(menuId,menuItemTitle,menuItemURL,menuItemType,menuItemUIRoute,isPublic,roles,position){return this.validateMenuExistance(menuId),this.menus[menuId].items.push({title:menuItemTitle,link:menuItemURL,menuItemType:menuItemType||"item",menuItemClass:menuItemType,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].roles:roles,position:position||0,items:[],shouldRender:shouldRender}),this.menus[menuId]},this.addSubMenuItem=function(menuId,rootMenuItemURL,menuItemTitle,menuItemURL,menuItemUIRoute,isPublic,roles,position){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===rootMenuItemURL&&this.menus[menuId].items[itemIndex].items.push({title:menuItemTitle,link:menuItemURL,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].items[itemIndex].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].items[itemIndex].roles:roles,position:position||0,shouldRender:shouldRender});return this.menus[menuId]},this.removeMenuItem=function(menuId,menuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===menuItemURL&&this.menus[menuId].items.splice(itemIndex,1);return this.menus[menuId]},this.removeSubMenuItem=function(menuId,submenuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)for(var subitemIndex in this.menus[menuId].items[itemIndex].items)this.menus[menuId].items[itemIndex].items[subitemIndex].link===submenuItemURL&&this.menus[menuId].items[itemIndex].items.splice(subitemIndex,1);return this.menus[menuId]},this.addMenu("topbar")}]),angular.module("core").factory("stateService",stateService),stateService.$inject=["$state"],angular.module("etc-products").config(["$stateProvider",function($stateProvider){$stateProvider.state("listEtcProducts",{url:"/etc-products",templateUrl:"modules/etc-products/views/list-etc-products.client.view.html"}).state("createEtcProduct",{url:"/etc-products/create",templateUrl:"modules/etc-products/views/create-etc-product.client.view.html"}).state("viewEtcProduct",{url:"/etc-products/:etcProductId",templateUrl:"modules/etc-products/views/view-etc-product.client.view.html"}).state("editEtcProduct",{url:"/etc-products/:etcProductId/edit",templateUrl:"modules/etc-products/views/edit-etc-product.client.view.html"})}]),angular.module("etc-products").controller("EtcProductsController",EtcProductsController),EtcProductsController.$inject=["$rootScope","$scope","$stateParams","$location","$mdDialog","Authentication","EtcProducts","$timeout","$q","$state","ProductBrands","Cartlist"],angular.module("etc-products").directive("productCreate",[function(){return{templateUrl:"modules/etc-products/views/create-etc-product.client.view.html",restrict:"E",link:function(scope,element,attrs){}}}]),angular.module("etc-products").directive("productList",[function(){return{templateUrl:"modules/etc-products/views/list-etc-products.client.view.html",restrict:"E",link:function(scope,element,attrs){}}}]),angular.module("etc-products").factory("EtcProducts",["$resource",function($resource){return $resource("etc-products/:etcProductId",{etcProductId:"@_id"},{update:{method:"PUT"},list:{method:"GET",cache:!0,isArray:!0}})}]),angular.module("etc").config(["$stateProvider",function($stateProvider){$stateProvider.state("admin",{url:"/admin",templateUrl:"modules/etc/views/admin.client.view.html"}).state("wigs",{url:"/",templateUrl:"modules/etc/views/wigs.client.view.html"}).state("etc",{url:"/etc",templateUrl:"modules/etc/views/etc.client.view.html"})}]),angular.module("etc").controller("AdminController",["$scope",function($scope){}]),angular.module("etc").controller("EtcController",["$scope",function($scope){$scope.todos=[{face:"/modules/etc-products/img/icon1.png",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:"/modules/etc-products/img/icon1.png",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:"/modules/etc-products/img/icon1.png",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:"/modules/etc-products/img/icon1.png",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"},{face:"/modules/etc-products/img/icon1.png",what:"Brunch this weekend?",who:"Min Li Chan",when:"3:08PM",notes:" I'll be in your neighborhood doing errands"}]}]),angular.module("etc").controller("WigsController",wigsCtrl),wigsCtrl.$inject=["$scope","$state","$timeout","EtcProducts","Preloadimage"],angular.module("etc").directive("colorPicker",[function(){function ColorPickerCtrl($scope){function buildGridModel(tileTmpl){for(var it,results=[],j=0;18>j;j++){switch(it=angular.extend({},tileTmpl),it.icon=it.icon+(j+1),it.title=it.title+(j+1),it.span={row:"1",col:"1"},j+1){case 1:it.background="red",it.img="modules/etc/img/1.jpg",it.span.row=it.span.col=2;break;case 2:it.background="green",it.img="modules/etc/img/2.jpg";break;case 3:it.background="darkBlue",it.img="modules/etc/img/3.jpg";break;case 4:it.background="blue",it.span.row=it.span.col=2,it.img="modules/etc/img/4.jpg";break;case 5:it.background="yellow",it.span.row=it.span.col=2,it.img="modules/etc/img/5.jpg";break;case 6:it.background="pink",it.img="modules/etc/img/6.jpg";break;case 7:it.background="darkBlue",it.img="modules/etc/img/7.jpg";break;case 8:it.background="purple",it.img="modules/etc/img/8.jpg";break;case 9:it.background="deepBlue",it.img="modules/etc/img/9.jpg";break;case 10:it.span.row=it.span.col=2,it.background="lightPurple",it.img="modules/etc/img/10.jpg";break;case 11:it.background="yellow",it.img="modules/etc/img/11.jpg";break;case 12:it.background="deepBlue",it.img="modules/etc/img/9.jpg";break;case 13:it.background="lightPurple",it.img="modules/etc/img/10.jpg";break;case 14:it.background="yellow",it.img="modules/etc/img/11.jpg";break;case 15:it.background="deepBlue",it.img="modules/etc/img/9.jpg";break;case 16:it.background="lightPurple",it.img="modules/etc/img/10.jpg";break;case 17:it.background="yellow",it.img="modules/etc/img/11.jpg";break;case 18:it.background="yellow",it.img="modules/etc/img/12.jpg"}results.push(it)}return results}this.items=[{imgSrc:"modules/etc/img/1.jpg",title:"Color 1"},{imgSrc:"modules/etc/img/2.jpg",title:"Color 2"},{imgSrc:"modules/etc/img/3.jpg",title:"Color 3"},{imgSrc:"modules/etc/img/4.jpg",title:"Color 4"},{imgSrc:"modules/etc/img/5.jpg",title:"Color 5"},{imgSrc:"modules/etc/img/6.jpg",title:"Color 6"},{imgSrc:"modules/etc/img/7.jpg",title:"Color 7"},{imgSrc:"modules/etc/img/8.jpg",title:"Color 8"},{imgSrc:"modules/etc/img/9.jpg",title:"Color 9"},{imgSrc:"modules/etc/img/10.jpg",title:"Color 10"},{imgSrc:"modules/etc/img/11.jpg",title:"Color 11"},{imgSrc:"modules/etc/img/12.jpg",title:"Color 12"},{imgSrc:"modules/etc/img/13.jpg",title:"Color 13"},{imgSrc:"modules/etc/img/14.jpg",title:"Color 14"},{imgSrc:"modules/etc/img/15.jpg",title:"Color 15"},{imgSrc:"modules/etc/img/16.jpg",title:"Color 16"}],this.coverSelected=function(event){console.log("selected"),console.log(event.path[2].outerHTML),TweenLite.to(event.path[2].outerHTML,1,{display:"block"})},this.tiles=buildGridModel({icon:"avatar:svg-",title:"Svg-",background:""})}return ColorPickerCtrl.$inject=["$scope"],{templateUrl:"modules/etc/directives/template/color-picker.html",restrict:"E",controller:ColorPickerCtrl,controllerAs:"vm",link:function(scope,element,attrs){}}}]),angular.module("etc").directive("gallery",[function(){function galleryCtrl($scope){function randomColor(){return COLORS[Math.floor(Math.random()*COLORS.length)]}function randomSpan(){var r=Math.random();return.8>r?1:.9>r?2:3}$scope.title="DD";var COLORS=["#ffebee","#ffcdd2","#ef9a9a","#e57373","#ef5350","#f44336","#e53935","#d32f2f","#c62828","#b71c1c","#ff8a80","#ff5252","#ff1744","#d50000","#f8bbd0","#f48fb1","#f06292","#ec407a","#e91e63","#d81b60","#c2185b","#ad1457","#880e4f","#ff80ab","#ff4081","#f50057","#c51162","#e1bee7","#ce93d8","#ba68c8","#ab47bc","#9c27b0","#8e24aa","#7b1fa2","#4a148c","#ea80fc","#e040fb","#d500f9","#aa00ff","#ede7f6","#d1c4e9","#b39ddb","#9575cd","#7e57c2","#673ab7","#5e35b1","#4527a0","#311b92","#b388ff","#7c4dff","#651fff","#6200ea","#c5cae9","#9fa8da","#7986cb","#5c6bc0","#3f51b5","#3949ab","#303f9f","#283593","#1a237e","#8c9eff","#536dfe","#3d5afe","#304ffe","#e3f2fd","#bbdefb","#90caf9","#64b5f6","#42a5f5","#2196f3","#1e88e5","#1976d2","#1565c0","#0d47a1","#82b1ff","#448aff","#2979ff","#2962ff","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b","#80d8ff","#40c4ff","#00b0ff","#0091ea","#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064","#84ffff","#18ffff","#00e5ff","#00b8d4","#e0f2f1","#b2dfdb","#80cbc4","#4db6ac","#26a69a","#009688","#00897b","#00796b","#00695c","#a7ffeb","#64ffda","#1de9b6","#00bfa5","#e8f5e9","#c8e6c9","#a5d6a7","#81c784","#66bb6a","#4caf50","#43a047","#388e3c","#2e7d32","#1b5e20","#b9f6ca","#69f0ae","#00e676","#00c853","#f1f8e9","#dcedc8","#c5e1a5","#aed581","#9ccc65","#8bc34a","#7cb342","#689f38","#558b2f","#33691e","#ccff90","#b2ff59","#76ff03","#64dd17","#f9fbe7","#f0f4c3","#e6ee9c","#dce775","#d4e157","#cddc39","#c0ca33","#afb42b","#9e9d24","#827717","#f4ff81","#eeff41","#c6ff00","#aeea00","#fffde7","#fff9c4","#fff59d","#fff176","#ffee58","#ffeb3b","#fdd835","#fbc02d","#f9a825","#f57f17","#ffff8d","#ffff00","#ffea00","#ffd600","#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00","#ffe57f","#ffd740","#ffc400","#ffab00","#fff3e0","#ffe0b2","#ffcc80","#ffb74d","#ffa726","#ff9800","#fb8c00","#f57c00","#ef6c00","#e65100","#ffd180","#ffab40","#ff9100","#ff6d00","#fbe9e7","#ffccbc","#ffab91","#ff8a65","#ff7043","#ff5722","#f4511e","#e64a19","#d84315","#bf360c","#ff9e80","#ff6e40","#ff3d00","#dd2c00","#d7ccc8","#bcaaa4","#795548","#d7ccc8","#bcaaa4","#8d6e63","#eceff1","#cfd8dc","#b0bec5","#90a4ae","#78909c","#607d8b","#546e7a","#cfd8dc","#b0bec5","#78909c"];$scope.colorTiles=function(){for(var tiles=[],i=0;46>i;i++)tiles.push({color:randomColor(),colspan:randomSpan(),rowspan:randomSpan()});return tiles}()}return galleryCtrl.$inject=["$scope"],{templateUrl:"modules/etc/directives/template/gallery.html",restrict:"E",controller:galleryCtrl,controllerAs:"vm",link:function(scope,element,attrs){}}}]),angular.module("etc").directive("productDetail",[function(){function ProductDetailCtrl($scope){}return ProductDetailCtrl.$inject=["$scope"],{templateUrl:"modules/etc/directives/template/product-detail.html",restrict:"E",controller:ProductDetailCtrl,controllerAs:"vm",link:function(scope,element,attrs){}
}}]),angular.module("etc").factory("Preloadimage",["$q","$rootScope",function($q,$rootScope){function Preloader(imageLocations){this.imageLocations=imageLocations,this.imageCount=this.imageLocations.length,this.loadCount=0,this.errorCount=0,this.states={PENDING:1,LOADING:2,RESOLVED:3,REJECTED:4},this.state=this.states.PENDING,this.deferred=$q.defer(),this.promise=this.deferred.promise}return Preloader.preloadImages=function(imageLocations){var preloader=new Preloader(imageLocations);return preloader.load()},Preloader.prototype={constructor:Preloader,isInitiated:function(){return this.state!==this.states.PENDING},isRejected:function(){return this.state===this.states.REJECTED},isResolved:function(){return this.state===this.states.RESOLVED},load:function(){if(this.isInitiated())return this.promise;this.state=this.states.LOADING;for(var i=0;i<this.imageCount;i++)this.loadImageLocation(this.imageLocations[i]);return this.promise},handleImageError:function(imageLocation){this.errorCount++,this.isRejected()||(this.state=this.states.REJECTED,this.deferred.reject(imageLocation))},handleImageLoad:function(imageLocation){this.loadCount++,this.isRejected()||(this.deferred.notify({percent:Math.ceil(this.loadCount/this.imageCount*100),imageLocation:imageLocation}),this.loadCount===this.imageCount&&(this.state=this.states.RESOLVED,this.deferred.resolve(this.imageLocations)))},loadImageLocation:function(imageLocation){var preloader=this,image=$(new Image).load(function(event){$rootScope.$apply(function(){preloader.handleImageLoad(event.target.src),preloader=image=event=null})}).error(function(event){$rootScope.$apply(function(){preloader.handleImageError(event.target.src),preloader=image=event=null})}).prop("src",imageLocation)}},Preloader}]),angular.module("footer").directive("footerInfo",[function(){return{template:"<div></div>",restrict:"E",link:function(scope,element,attrs){element.addClass("FI-body"),element.append('<h2 class="md-title">Top Clippers</h2>'),element.append('<div class="md-body-1">Best Price</div>'),element.append('<div class="md-body-1">Best Quality</div>'),element.append('<div class="md-body-1">Best Choice</div>')}}}]),angular.module("payment").config(["$stateProvider",function($stateProvider){$stateProvider.state("bt-payment-test",{url:"/bt-payment-test",templateUrl:"modules/payment/views/bt-payment-test.client.view.html"})}]),angular.module("payment").controller("BtPaymentTestController",["$scope","$http","clientTokenPath","TokenBraintree",function($scope,$http,clientTokenPath,TokenBraintree){var token="",token=TokenBraintree.get();token.$promise.then(function(data){console.log(data)}),console.log(clientTokenPath),$http.get("/client-token").success(function(data){console.log(data),braintree.setup(data,"custom",{id:"checkout",hostedFields:{styles:{input:{color:"#3A3A3A",transition:colorTransition,"-webkit-transition":colorTransition},":focus":{color:"#333333"},".invalid":{color:"#FF0000"}},number:{selector:"#number"},expirationDate:{selector:"#expiration-date"}}})});var colorTransition="color 100ms ease-out";$scope.addCustomer=function(){$http.get("/addNewCustomer").success(function(data){$scope.resultCust=data,console.log(data)})}}]),angular.module("payment").controller("dropinCtrl",dropinCtrl),dropinCtrl.$inject=["$http"],angular.module("payment").controller("checkout",checkout),checkout.$inject=["$scope","$http"],angular.module("payment").constant("clientTokenPath","/client-token").controller("BtPaymentController",BtPaymentController),BtPaymentController.$inject=["$scope","$http","$braintree"],angular.module("payment").directive("btPayment",[function(){return{templateUrl:"modules/payment/directives/template/bt-payment.html",restrict:"E",controller:"BtPaymentController",link:function(scope,element,attrs){}}}]),angular.module("payment").factory("TokenBraintree",["$resource",function($resource){return $resource("/client-token",{},{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}})}]),angular.module("product-brands").config(["$stateProvider",function($stateProvider){$stateProvider.state("listProductBrands",{url:"/product-brands",templateUrl:"modules/product-brands/views/list-product-brands.client.view.html"}).state("createProductBrand",{url:"/product-brands/create",templateUrl:"modules/product-brands/views/create-product-brand.client.view.html"}).state("viewProductBrand",{url:"/product-brands/:productBrandId",templateUrl:"modules/product-brands/views/view-product-brand.client.view.html"}).state("editProductBrand",{url:"/product-brands/:productBrandId/edit",templateUrl:"modules/product-brands/views/edit-product-brand.client.view.html"})}]),angular.module("product-brands").controller("ProductBrandsController",["$scope","$stateParams","$location","Authentication","ProductBrands",function($scope,$stateParams,$location,Authentication,ProductBrands){$scope.authentication=Authentication,$scope.create=function(){var productBrand=new ProductBrands({name:this.name});productBrand.$save(function(response){$location.path("product-brands/"+response._id),$scope.name=""},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.remove=function(productBrand){if(productBrand){productBrand.$remove();for(var i in $scope.productBrands)$scope.productBrands[i]===productBrand&&$scope.productBrands.splice(i,1)}else $scope.productBrand.$remove(function(){$location.path("product-brands")})},$scope.update=function(){var productBrand=$scope.productBrand;productBrand.$update(function(){$location.path("product-brands/"+productBrand._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.find=function(){$scope.productBrands=ProductBrands.query()},$scope.findOne=function(){$scope.productBrand=ProductBrands.get({productBrandId:$stateParams.productBrandId})}}]),angular.module("product-brands").directive("brandCreate",[function(){return{templateUrl:"modules/product-brands/directives/template/brand-create.html",restrict:"E",link:function(scope,element,attrs){}}}]),angular.module("product-brands").directive("brandList",[function(){return{templateUrl:"modules/product-brands/views/list-product-brands.client.view.html",restrict:"E",link:function(scope,element,attrs){}}}]),angular.module("product-brands").factory("ProductBrands",["$resource",function($resource){return $resource("product-brands/:productBrandId",{productBrandId:"@_id"},{update:{method:"PUT"}})}]),angular.module("shop-cart").config(["$stateProvider",function($stateProvider){$stateProvider.state("cart",{url:"/cart",templateUrl:"modules/shop-cart/views/cart.client.view.html"})}]),angular.module("shop-cart").controller("ShopCartController",ShopCartController),ShopCartController.$inject=["$scope","Cartlist"],angular.module("shop-cart").directive("shopCart",shopCartDirective),shopCartDirective.$inject=["$compile","Cartlist"],angular.module("shop-cart").factory("Cartlist",Cartlist),angular.module("slide-show").config(["$stateProvider",function($stateProvider){$stateProvider.state("slide-show-view",{url:"/slide-show-view",templateUrl:"modules/slide-show/views/slide-show-view.client.view.html"})}]),angular.module("slide-show").controller("SlideShowViewController",["$scope",function($scope){}]),angular.module("slide-show").directive("slideShowCust",[function(){return{templateUrl:"modules/slide-show/directives/template/slide-show.html",restrict:"E",link:function(scope,element,attrs){function animateSlide1(){var slideTL1=new TimelineMax({onComplete:prepNext,onCompleteParams:["{self}",slide1]});return slideTL1.add("slide1fade").set(slide1,{opacity:1}).add(TweenMax.to(slide1,fadeSpeed,{css:{autoAlpha:0}})).add("slide1afterfade").add(TweenMax.to(slide1,duration)).from(progressBar,slideTL1.duration(),{scaleX:0,transformOrigin:"0px 0px",ease:Linear.easeNone},0),slideTL1}function animateSlide2(){var slideTL2=new TimelineMax({onComplete:prepNext,onCompleteParams:["{self}",slide2]});return slideTL2.add("slide2fade").add(TweenMax.to(slide2,fadeSpeed,{css:{autoAlpha:0}})).add("slide2afterfade").add(TweenMax.to(slide2,duration)).from(progressBar,slideTL2.duration(),{scaleX:0,transformOrigin:"0px 0px",ease:Linear.easeNone},0),slideTL2}function animateSlide3(){var slideTL3=new TimelineMax({onComplete:prepNext,onCompleteParams:["{self}",slide3]});return slideTL3.add("slide3fade").add(TweenMax.to(slide3,fadeSpeed,{css:{autoAlpha:0}})).add("slide3afterfade").add(TweenMax.to(slide3,duration)).from(progressBar,slideTL3.duration(),{scaleX:0,transformOrigin:"0px 0px",ease:Linear.easeNone},0),slideTL3}function updateZindex(){$("#slider").children().css("zIndex",function(i){return slideCount-i})}function prepNext(timeline,slide){slide.appendTo(slide.parent()),updateZindex(),timeline.set(slide,{autoAlpha:1}),currentSlide=++currentSlide%slideCount}var slider=$("#slider"),slides=slider.children(),slideCount=slides.length,currentSlide=0,duration=4,fadeSpeed=1,slide1=$("#slide1"),slide2=$("#slide2"),slide3=$("#slide3"),playBtn=$("#playbtn"),pauseBtn=$("#pausebtn"),resumeBtn=$("#resumebtn"),stopBtn=$("#stopbtn"),restartBtn=$("#restartbtn"),reverseBtn=$("#reversebtn"),slide1Btn=($("#nextbtn"),$("#prevbtn"),$("#slide1btn")),slide2Btn=$("#slide2btn"),slide3Btn=$("#slide3btn"),progressBar=$("#progressBar"),tl=new TimelineMax({paused:!0,repeat:1});updateZindex(),slide1Btn.click(function(){tl.play("slide1afterfade")}),slide1Btn.click(function(){tl.play("slide1afterfade")}),slide2Btn.click(function(){tl.play("slide2afterfade")}),slide3Btn.click(function(){tl.play("slide3afterfade")}),playBtn.click(function(){tl.play("slide1afterfade")}),pauseBtn.click(function(){console.log("p"),tl.pause()}),resumeBtn.click(function(){tl.resume()}),stopBtn.click(function(){tl.stop()}),restartBtn.click(function(){tl.restart()}),reverseBtn.click(function(){tl.reverse()}),slider.on("mouseenter",function(){tl.pause()}).on("mouseleave",function(){tl.resume()}),scope.build=function(){tl.add(animateSlide3(),"slide1").add(animateSlide1(),"slide2").add(animateSlide2(),"slide3").play()},scope.build()}}}]),angular.module("users").config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push(["$q","$location","Authentication",function($q,$location,Authentication){return{responseError:function(rejection){switch(rejection.status){case 401:Authentication.user=null,$location.path("signin");break;case 403:}return $q.reject(rejection)}}}])}]),angular.module("users").config(["$stateProvider",function($stateProvider){$stateProvider.state("profile",{url:"/settings/profile",templateUrl:"modules/users/views/settings/edit-profile.client.view.html"}).state("password",{url:"/settings/password",templateUrl:"modules/users/views/settings/change-password.client.view.html"}).state("accounts",{url:"/settings/accounts",templateUrl:"modules/users/views/settings/social-accounts.client.view.html"}).state("signup",{url:"/signup",templateUrl:"modules/users/views/authentication/signup.client.view.html"}).state("signin",{url:"/signin",templateUrl:"modules/users/views/authentication/signin.client.view.html"}).state("forgot",{url:"/password/forgot",templateUrl:"modules/users/views/password/forgot-password.client.view.html"}).state("reset-invalid",{url:"/password/reset/invalid",templateUrl:"modules/users/views/password/reset-password-invalid.client.view.html"}).state("reset-success",{url:"/password/reset/success",templateUrl:"modules/users/views/password/reset-password-success.client.view.html"}).state("reset",{url:"/password/reset/:token",templateUrl:"modules/users/views/password/reset-password.client.view.html"})}]),angular.module("users").controller("AuthenticationController",["$scope","$http","$location","Authentication",function($scope,$http,$location,Authentication){var wistiaEmbed=Wistia.embed("29b0fbf547",{version:"v1",videoWidth:640,videoHeight:360,playerColor:"688AAD"});wistiaEmbed.bind("play",function(){return wistiaEmbed.time(10),this.unbind}),$scope.play=function(){wistiaEmbed.time(30).play()},$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.signup=function(){$http.post("/auth/signup",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})},$scope.signin=function(){$http.post("/auth/signin",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("PasswordController",["$scope","$stateParams","$http","$location","Authentication",function($scope,$stateParams,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.askForPasswordReset=function(){$scope.success=$scope.error=null,$http.post("/auth/forgot",$scope.credentials).success(function(response){$scope.credentials=null,$scope.success=response.message}).error(function(response){$scope.credentials=null,$scope.error=response.message})},$scope.resetUserPassword=function(){$scope.success=$scope.error=null,$http.post("/auth/reset/"+$stateParams.token,$scope.passwordDetails).success(function(response){$scope.passwordDetails=null,Authentication.user=response,$location.path("/password/reset/success")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("SettingsController",["$scope","$http","$location","Users","Authentication",function($scope,$http,$location,Users,Authentication){$scope.user=Authentication.user,$scope.user||$location.path("/"),$scope.hasConnectedAdditionalSocialAccounts=function(provider){for(var i in $scope.user.additionalProvidersData)return!0;return!1},$scope.isConnectedSocialAccount=function(provider){return $scope.user.provider===provider||$scope.user.additionalProvidersData&&$scope.user.additionalProvidersData[provider]},$scope.removeUserSocialAccount=function(provider){$scope.success=$scope.error=null,$http["delete"]("/users/accounts",{params:{provider:provider}}).success(function(response){$scope.success=!0,$scope.user=Authentication.user=response}).error(function(response){$scope.error=response.message})},$scope.updateUserProfile=function(isValid){if(isValid){$scope.success=$scope.error=null;var user=new Users($scope.user);user.$update(function(response){$scope.success=!0,Authentication.user=response},function(response){$scope.error=response.data.message})}else $scope.submitted=!0},$scope.changeUserPassword=function(){$scope.success=$scope.error=null,$http.post("/users/password",$scope.passwordDetails).success(function(response){$scope.success=!0,$scope.passwordDetails=null}).error(function(response){$scope.error=response.message})}}]),angular.module("users").factory("Authentication",["$window",function($window){var auth={user:$window.user};return auth}]),angular.module("users").factory("Users",["$resource",function($resource){return $resource("users",{},{update:{method:"PUT"}})}]);